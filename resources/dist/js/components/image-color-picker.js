function g({image:h,state:u,format:l,isLive:d}){function C(t){let e=new Image;return e.crossOrigin="",e.src=t,new Promise((i,n)=>{e.complete?i(e):e.addEventListener("load",()=>i(e)),e.addEventListener("error",n)})}function m(t,e,i){t/=255,e/=255,i/=255;let n=Math.min(t,e,i),s=Math.max(t,e,i),r=s-n,o=0,c=0,a=0;return r==0?o=0:s==t?o=(e-i)/r%6:s==e?o=(i-t)/r+2:o=(t-e)/r+4,o=Math.round(o*60),o<0&&(o+=360),a=(s+n)/2,c=r==0?0:r/(1-Math.abs(2*a-1)),c=+(c*100).toFixed(1),a=+(a*100).toFixed(1),"hsl("+o+","+c+"%,"+a+"%)"}function v(t,e,i){return`#${[t,e,i].map(s=>s.toString(16).padStart(2,"0").toUpperCase()).join("")}`}function x(t,e,i){return`rgb(${t}, ${e}, ${i})`}function f(t){return l==="hex"?v(t[0],t[1],t[2]):l==="hsl"?m(t[0],t[1],t[2]):x(t[0],t[1],t[2])}return{canvas:null,previewColor:null,previewColorTimeout:0,selectedColor:u,x:0,y:0,clientX:0,clientY:0,init(){let t=this.$refs.canvas;C(h).then(e=>{t.width=e.width,t.height=e.height;let i=t.getContext("2d");console.log(e.src),i.drawImage(e,0,0)}),this.canvas=t},onClick(t){this.selectColor(t),this.selectedColor=this.previewColor,d&&this.$wire.$commit()},selectColor(t){let{x:e,y:i}=this.getRelativeCoordinates(t.clientX,t.clientY),n=this.canvas.getContext("2d"),{data:s}=n.getImageData(e,i,1,1);this.previewColor=f(s),this.x=e,this.y=i,this.clientX=t.clientX,this.clientY=t.clientY,clearTimeout(this.previewColorTimeout),this.previewColorTimeout=setTimeout(()=>this.previewColor=null,1500)},getRelativeCoordinates(t,e){let i=this.canvas,n=i.getBoundingClientRect(),s=i.width/n.width,r=i.height/n.height,o=(t-n.left)*s,c=(e-n.top)*r;return{x:o,y:c}}}}export{g as default};
