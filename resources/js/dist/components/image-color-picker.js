function g({image:h,state:u,format:l}){function d(t){let e=new Image;return e.crossOrigin="",e.src=t,new Promise((n,i)=>{e.complete?n(e):e.addEventListener("load",()=>n(e)),e.addEventListener("error",i)})}function C(t,e,n){t/=255,e/=255,n/=255;let i=Math.min(t,e,n),o=Math.max(t,e,n),r=o-i,s=0,a=0,c=0;return r==0?s=0:o==t?s=(e-n)/r%6:o==e?s=(n-t)/r+2:s=(t-e)/r+4,s=Math.round(s*60),s<0&&(s+=360),c=(o+i)/2,a=r==0?0:r/(1-Math.abs(2*c-1)),a=+(a*100).toFixed(1),c=+(c*100).toFixed(1),"hsl("+s+","+a+"%,"+c+"%)"}function v(t,e,n){return`#${[t,e,n].map(o=>o.toString(16).padStart(2,"0").toUpperCase()).join("")}`}function x(t,e,n){return`rgb(${t}, ${e}, ${n})`}function f(t){return l==="hex"?v(t[0],t[1],t[2]):l==="hsl"?C(t[0],t[1],t[2]):x(t[0],t[1],t[2])}return{canvas:null,previewColor:null,previewColorTimeout:0,selectedColor:u,x:0,y:0,clientX:0,clientY:0,init(){let t=this.$refs.canvas;d(h).then(e=>{t.width=e.width,t.height=e.height;let n=t.getContext("2d");console.log(e.src),n.drawImage(e,0,0)}),this.canvas=t},onClick(t){this.selectColor(t),this.selectedColor=this.previewColor},selectColor(t){let{x:e,y:n}=this.getRelativeCoordinates(t.clientX,t.clientY),i=this.canvas.getContext("2d"),{data:o}=i.getImageData(e,n,1,1);this.previewColor=f(o),this.x=e,this.y=n,this.clientX=t.clientX,this.clientY=t.clientY,clearTimeout(this.previewColorTimeout),this.previewColorTimeout=setTimeout(()=>this.previewColor=null,1500)},getRelativeCoordinates(t,e){let n=this.canvas,i=n.getBoundingClientRect(),o=n.width/i.width,r=n.height/i.height,s=(t-i.left)*o,a=(e-i.top)*r;return{x:s,y:a}}}}export{g as default};
